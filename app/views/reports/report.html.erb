<% post_reports = @reports.where(reportable_type: 'Post') %>
<% comment_reports = @reports.where(reportable_type: 'Comment') %>

<% unless post_reports.empty? %>
<h1>Reported Posts</h1>
  <table>
    <tr>
      <th>User_id</th>
      <th>Title</th>
      <th>Text</th>
      <th>Reporter_id</th>
      <th colspan="3"></th>
    </tr>

    <% post_reports.each do |report| %>
      <% post = report.reportable %>
      <% if post.approved? %>
        <tr>
          <td><%= post.user_id %></td>
          <td><%= post.title %></td>
          <td><%= post.text %></td>
          <td><%= report.user_id %></td>
          <td><%= link_to 'Show', post_path(post) %></td>
          <td><%= link_to 'Un-publish', report_status_report_path(post),
                  method: :post %></td>
          <td><%= link_to 'Delete', post_path(post),
                  method: :delete,
                  data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    <% end %>
  </table>
<% end %>

<% unless comment_reports.empty? %>
<h1>Reported Comments</h1>
  <table>
    <tr>
      <th>User_id</th>
      <th>Text</th>
      <th>Reporter_id</th>
      <th colspan="2"></th>
    </tr>

    <% comment_reports.each do |report| %>
      <% comment = report.reportable %>
      <tr>
        <td><%= comment.user_id %></td>
        <td><%= comment.text %></td>
        <td><%= report.user_id %></td>
        <td><%= link_to 'Show', view_comment_path(comment) %></td>
        <td><%= link_to 'Delete', comment_path(comment),
                method: :delete,
                data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </table>
<% end %>
