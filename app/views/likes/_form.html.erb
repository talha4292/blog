<% like = current_user.likes.find_by(likeable: @post) %>
<% if like.nil? %>
  <form action='<%= post_likes_path(@post) %>', method='post'>
    <input type='hidden' name='authenticity_token' value='<%= form_authenticity_token %>'>
    <input type='hidden' name='like[likeable_id]', value='<%= @post.id %>'>
    <input type='hidden' name='like[likeable_type]', value='Post'>
    <input type='submit' value='Like'>
  </form>
<% else %>
  <form action='<%= like_path(like) %>', method='post'>
    <input type='hidden' name='authenticity_token' value='<%= form_authenticity_token %>'>
    <input type='hidden' name='_method', value='DELETE'>
    <input type='submit' value='Unlike'>
  </form>
<% end %>
